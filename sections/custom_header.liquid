<div style="position: relative; display: flex; align-items: center; justify-content: space-between; padding: 10px 20px;">
  
  <!-- Left Menu -->
  <div style="flex: 1;">
    {% if section.settings.logo_position != 'right' and section.settings.main_menu != blank %}
      <nav class="main-menu">
        <ul style="list-style: none; display: flex; gap: 20px; margin: 0; padding: 0;">
          {% for link in linklists[section.settings.main_menu].links %}
            <li>
              <a href="{{ link.url }}" style="text-decoration: none; font-size: {{ section.settings.menu_font }}px; color: #000;">
                {{ link.title }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </nav>
    {% endif %}
  </div>

  <!-- Centered Logo (independent of menu) -->
  {% if section.settings.logo_position == 'center' %}
    <div style="position: absolute; left: 50%; transform: translateX(-50%); text-align: center;">
      {% unless section.settings.show_logo %}
        {% if section.settings.logo != blank %}
          <span
            style="
              display: inline-block;
              padding-top: {{ section.settings.logo_padding_top }}px;
              padding-right: {{ section.settings.logo_padding_right }}px;
              padding-bottom: {{ section.settings.logo_padding_bottom }}px;
              padding-left: {{ section.settings.logo_padding_left }}px;
            "
          >
            <img 
              src="{{ section.settings.logo | image_url: width: section.settings.logo_width }}" 
              alt="{{ section.settings.logo.alt | default: shop.name }}" 
              style="width: {{ section.settings.logo_width }}px !important; max-width: 100%; height: auto;"
              loading="lazy"
              width="{{ section.settings.logo_width }}"
            >
          </span>
        {% else %}
          <span style="font-size: {{ section.settings.menu_font }}px;">
            {{ shop.name }}
          </span>
        {% endif %}
      {% endunless %}
    </div>
  {% else %}
    <!-- Logo on Left or Right -->
    <div style="flex: 1; text-align: {{ section.settings.logo_position }};">
      {% unless section.settings.show_logo %}
        {% if section.settings.logo != blank %}
          <span
            style="
              display: inline-block;
              padding-top: {{ section.settings.logo_padding_top }}px;
              padding-right: {{ section.settings.logo_padding_right }}px;
              padding-bottom: {{ section.settings.logo_padding_bottom }}px;
              padding-left: {{ section.settings.logo_padding_left }}px;
            "
          >
            <img 
              src="{{ section.settings.logo | image_url: width: section.settings.logo_width }}" 
              alt="{{ section.settings.logo.alt | default: shop.name }}" 
              style="width: {{ section.settings.logo_width }}px !important; max-width: 100%; height: auto;"
              loading="lazy"
              width="{{ section.settings.logo_width }}"
            >
          </span>
        {% else %}
          <span style="font-size: {{ section.settings.menu_font }}px;">
            {{ shop.name }}
          </span>
        {% endif %}
      {% endunless %}
    </div>
  {% endif %}

  <!-- Right Placeholder -->
  <div style="flex: 1; text-align: right;">
    {% if section.settings.logo_position == 'right' and section.settings.main_menu != blank %}
      <nav class="main-menu">
        <ul style="list-style: none; display: flex; gap: 20px; margin: 0; padding: 0; justify-content: flex-end;">
          {% for link in linklists[section.settings.main_menu].links %}
            <li>
              <a href="{{ link.url }}" style="text-decoration: none; font-size: {{ section.settings.menu_font }}px; color: #000;">
                {{ link.title }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </nav>
    {% endif %}
  </div>
</div>
