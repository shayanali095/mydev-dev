{%- assign hero_height = section.settings.hero_height | default: 270 -%}

<section class="custom-hero" 
  style="
    background-image: url({{ section.settings.hero_background | image_url: width: 1600 }});
    background-size: cover;
    background-position: center;
    height: {{ hero_height }}px;
    color: {{ section.settings.text_color }};
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    padding: 20px 0;
  ">
    
  <div class="hero-content" style="
      max-width: 800px;
      width: 100%;
      text-align: {{ section.settings.text_alignment }};
      padding-top: {{ section.settings.padding_top | default: 0 }}px;
      padding-bottom: {{ section.settings.padding_bottom | default: 0 }}px;
      padding-left: 20px;
      padding-right: 20px;
    ">
    {% if section.settings.hero_title != blank %}
      <h1 style="font-size: {{ section.settings.title_font }}px; margin-bottom: 1rem;">
        {{ section.settings.hero_title }}
      </h1>
    {% endif %}
    
    {% if section.settings.hero_subtitle != blank %}
      <p style="font-size: {{ section.settings.subtitle_font }}px; margin-bottom: 1.5rem;">
        {{ section.settings.hero_subtitle }}
      </p>
    {% endif %}
    
    {% if section.settings.hero_button_label != blank %}
      <a href="{{ section.settings.hero_button_link }}" class="hero-button"
         style="background: {{ section.settings.button_color }}; color: {{ section.settings.button_text_color }}; padding: 14px 28px; text-decoration: none; font-weight: bold; border-radius: 6px;">
        {{ section.settings.hero_button_label }}
      </a>
    {% endif %}
  </div>

  {% if section.settings.category_collections != blank %}
    <div class="collection-list" style="width: 100%; max-width: 1200px; padding: 20px;">
      {% for collection in section.settings.category_collections %}
        <div class="collection-item" style="margin-bottom: 30px;">
          <h2 style="font-size: 24px; cursor: pointer;" onclick="this.nextElementSibling.classList.toggle('active')">
            {{ collection.title }}
          </h2>
          <div class="products-grid" style="display: none; gap: 20px; flex-wrap: wrap;" class="product-wrapper">
            {% for product in collection.products limit: 4 %}
              <div style="width: 23%; border: 1px solid #eee; padding: 10px;">
                <a href="{{ product.url }}">
                  <img src="{{ product.featured_image | image_url: width: 400 }}" alt="{{ product.title }}" style="width: 100%;">
                  <p>{{ product.title }}</p>
                  <p>{{ product.price | money }}</p>
                </a>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.collection-item h2').forEach(heading => {
          heading.addEventListener('click', function () {
            const grid = this.nextElementSibling;
            grid.style.display = grid.style.display === 'flex' ? 'none' : 'flex';
          });
        });
      });
    </script>
  {% endif %}
</section>

{% schema %}
{
  "name": "Hero",
  "settings": [
    {
      "type": "image_picker",
      "id": "hero_background",
      "label": "Background Image"
    },
    {
      "type": "text",
      "id": "hero_title",
      "label": "Hero Title",
      "default": "Welcome to Our Store"
    },
    {
      "type": "text",
      "id": "hero_subtitle",
      "label": "Hero Subtitle",
      "default": "Discover our latest collection and best deals"
    },
    {
      "type": "text",
      "id": "hero_button_label",
      "label": "Button Label",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "hero_button_link",
      "label": "Button Link"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Background Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Text Layout"
    },
    {
      "type": "range",
      "id": "hero_height",
      "label": "Hero Section Height (in px)",
      "min": 50,
      "max": 600,
      "step": 10,
      "default": 270
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "title_font",
      "label": "Title font Size",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 35
    },
    {
      "type": "range",
      "id": "subtitle_font",
      "label": "Subtitle font Size",
      "min": 0,
      "max": 100,
      "step": 2,
      "default": 14
    },
    {
      "type": "header",
      "content": "Text Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top Padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 20
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom Padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 20
    },
    {
      "type": "header",
      "content": "Product List"
    },
    {
      "type": "collection_list",
      "id": "category_collections",
      "label": "Choose Categories to Display"
    }
  ]
}
{% endschema %}
